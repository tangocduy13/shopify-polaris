{"version":3,"file":"todoRepository.js","names":["_fs","_interopRequireDefault","require","_todos","_writeToFile","obj","__esModule","default","getAll","todos","getOne","id","todoId","parseInt","find","todo","create","data","Math","floor","random","newTodo","updatedTodos","writeToFile","updateMany","array","map","includes","completed","removeMany","filter"],"sources":["../../src/database/todoRepository.js"],"sourcesContent":["import fs from \"fs\";\r\nimport todos from \"./todos.json\";\r\nimport writeToFile from \"../helpers/writeToFile\";\r\n\r\nexport function getAll() {\r\n  return todos;\r\n}\r\n\r\nexport function getOne({ id }) {\r\n  let todoId = parseInt(id);\r\n  return todos.find((todo) => todo.id == todoId);\r\n}\r\n\r\nexport function create(data) {\r\n  const id = Math.floor(Math.random() * (500 - 1 + 1)) + 1;\r\n  const newTodo = {\r\n    ...data,\r\n    id: id,\r\n  };\r\n  const updatedTodos = [newTodo, ...todos];\r\n  writeToFile(updatedTodos);\r\n  return newTodo; // trả dữ liệu lên FE để thêm mới vào todo list\r\n}\r\n\r\nexport function updateMany(array) {\r\n  const updatedTodos = todos.map((todo) => {\r\n    if (array.includes(todo.id)) {\r\n      return {\r\n        ...todo,\r\n        completed: !todo.completed,\r\n      }; // map return về một mảng mới\r\n    } else return todo;\r\n  });\r\n  writeToFile(updatedTodos);\r\n}\r\n\r\nexport function removeMany(array) {\r\n  const updatedTodos = todos.filter((todo) => !array.includes(todo.id));\r\n  writeToFile(updatedTodos);\r\n}\r\n"],"mappings":";;;;;;;;;;AAAA,IAAAA,GAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,MAAA,GAAAF,sBAAA,CAAAC,OAAA;AACA,IAAAE,YAAA,GAAAH,sBAAA,CAAAC,OAAA;AAAiD,SAAAD,uBAAAI,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAE1C,SAASG,MAAMA,CAAA,EAAG;EACvB,OAAOC,cAAK;AACd;AAEO,SAASC,MAAMA,CAAC;EAAEC;AAAG,CAAC,EAAE;EAC7B,IAAIC,MAAM,GAAGC,QAAQ,CAACF,EAAE,CAAC;EACzB,OAAOF,cAAK,CAACK,IAAI,CAAEC,IAAI,IAAKA,IAAI,CAACJ,EAAE,IAAIC,MAAM,CAAC;AAChD;AAEO,SAASI,MAAMA,CAACC,IAAI,EAAE;EAC3B,MAAMN,EAAE,GAAGO,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,MAAM,CAAC,CAAC,IAAI,GAAG,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC;EACxD,MAAMC,OAAO,GAAG;IACd,GAAGJ,IAAI;IACPN,EAAE,EAAEA;EACN,CAAC;EACD,MAAMW,YAAY,GAAG,CAACD,OAAO,EAAE,GAAGZ,cAAK,CAAC;EACxC,IAAAc,oBAAW,EAACD,YAAY,CAAC;EACzB,OAAOD,OAAO,CAAC,CAAC;AAClB;AAEO,SAASG,UAAUA,CAACC,KAAK,EAAE;EAChC,MAAMH,YAAY,GAAGb,cAAK,CAACiB,GAAG,CAAEX,IAAI,IAAK;IACvC,IAAIU,KAAK,CAACE,QAAQ,CAACZ,IAAI,CAACJ,EAAE,CAAC,EAAE;MAC3B,OAAO;QACL,GAAGI,IAAI;QACPa,SAAS,EAAE,CAACb,IAAI,CAACa;MACnB,CAAC,CAAC,CAAC;IACL,CAAC,MAAM,OAAOb,IAAI;EACpB,CAAC,CAAC;EACF,IAAAQ,oBAAW,EAACD,YAAY,CAAC;AAC3B;AAEO,SAASO,UAAUA,CAACJ,KAAK,EAAE;EAChC,MAAMH,YAAY,GAAGb,cAAK,CAACqB,MAAM,CAAEf,IAAI,IAAK,CAACU,KAAK,CAACE,QAAQ,CAACZ,IAAI,CAACJ,EAAE,CAAC,CAAC;EACrE,IAAAY,oBAAW,EAACD,YAAY,CAAC;AAC3B"}