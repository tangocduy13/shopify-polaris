{"version":3,"file":"todoRepository.js","names":["_fs","_interopRequireDefault","require","_todos","obj","__esModule","default","getAll","todos","getOne","id","todoId","parseInt","find","todo","create","data","console","log","Math","floor","random","newTodo","updatedTodos","fs","writeFileSync","JSON","stringify","update","index","findIndex","completed","updateMany","array","map","includes","remove","splice","removeMany","filter"],"sources":["../../src/database/todoRepository.js"],"sourcesContent":["import fs from \"fs\";\r\nimport todos from \"./todos.json\";\r\n\r\nexport function getAll() {\r\n  return todos;\r\n}\r\n\r\nexport function getOne({ id }) {\r\n  let todoId = parseInt(id);\r\n  return todos.find((todo) => todo.id == todoId);\r\n}\r\n\r\nexport function create(data) {\r\n  console.log(data);\r\n  const id = Math.floor(Math.random() * (500 - 1 + 1)) + 1;\r\n  const newTodo = {\r\n    ...data,\r\n    id: id,\r\n  };\r\n  const updatedTodos = [newTodo, ...todos];\r\n  return fs.writeFileSync(\r\n    \"./src/database/todos.json\",\r\n    JSON.stringify(updatedTodos)\r\n  );\r\n}\r\n\r\nexport function update({ id }) {\r\n  let todoId = parseInt(id);\r\n  const index = todos.findIndex((todo) => todo.id == todoId);\r\n  if (index !== -1) {\r\n    const completed = todos[index].completed;\r\n    todos[index].completed = !completed;\r\n    return fs.writeFileSync(\"./src/database/todos.json\", JSON.stringify(todos));\r\n  }\r\n}\r\n\r\nexport function updateMany(array) {\r\n  const updatedTodos = todos.map((todo) => {\r\n    if (array.includes(todo.id)) {\r\n      return {\r\n        ...todo,\r\n        completed: !todo.completed,\r\n      }; // map return về một mảng mới\r\n    } else return todo;\r\n  });\r\n  return fs.writeFileSync(\r\n    \"./src/database/todos.json\",\r\n    JSON.stringify(updatedTodos)\r\n  );\r\n}\r\n\r\nexport function remove({ id }) {\r\n  let todoId = parseInt(id);\r\n  const index = todos.findIndex((todo) => todo.id == todoId);\r\n  if (index !== -1) {\r\n    todos.splice(index, 1);\r\n    return fs.writeFileSync(\"./src/database/todos.json\", JSON.stringify(todos));\r\n  }\r\n}\r\n\r\nexport function removeMany(array) {\r\n  const updatedTodos = todos.filter((todo) => !array.includes(todo.id));\r\n  return fs.writeFileSync(\r\n    \"./src/database/todos.json\",\r\n    JSON.stringify(updatedTodos)\r\n  );\r\n}\r\n"],"mappings":"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"}